(()=>{"use strict";var e={321:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.render=void 0,r.render=(e,r,t)=>{e.innerHTML="",e.setAttribute("style",`grid-template-columns: repeat(${r}, 50px)`);for(let t=0;t<r*r;t++){const r=document.createElement("div");r.classList.add("cell"),e.appendChild(r)}Array.from(e.children).forEach(((e,l)=>{var n,o;e.setAttribute("cellX",String(l%r)),e.setAttribute("cellY",String(Math.floor(l/r))),e.innerHTML=null!==(o=null===(n=null==t?void 0:t[Math.floor(l/r)])||void 0===n?void 0:n[l%r])&&void 0!==o?o:null}))}}},r={};function t(l){var n=r[l];if(void 0!==n)return n.exports;var o=r[l]={exports:{}};return e[l](o,o.exports,t),o.exports}(()=>{const e=t(321),r={"x player":"x","o player":"o"};let l=Object.keys(r)[0],n=!1,o=new Array(5).fill(null).map((e=>new Array(5).fill(null)));const i=document.querySelector(".field"),d=document.querySelector(".currPlayer"),u=document.querySelector(".reload"),c=document.querySelector(".winner");i.addEventListener("click",(e=>{if(n)return;const t=e.target;if(t.classList.contains("cell")){const[e,v]=[Number(t.getAttribute("cellX")),Number(t.getAttribute("cellY"))];if(((e,r,t)=>{var l,n;return null!==(n=null===(l=null==t?void 0:t[e])||void 0===l?void 0:l[r])&&void 0!==n?n:null})(v,e,o))return;t.innerHTML=r[l],i=e,(u=o)[v][i]=r[l],o=u,((e,t,n)=>{var o,i,d,u;const c={h:0,v:0,dtop:0,dbot:0},v={h:0,v:0,dtop:0,dbot:0};for(let a=-2;a<3;a++){if((null===(o=null==n?void 0:n[t])||void 0===o?void 0:o[e-a])===r[l]){if(c.h++,c.h>=3)return!0;c.h>v.h&&v.h++}else c.h=0;if((null===(i=null==n?void 0:n[t-a])||void 0===i?void 0:i[e])===r[l]){if(c.v++,c.v>=3)return!0;c.v>v.v&&v.v++}else c.v=0;if((null===(d=null==n?void 0:n[t-a])||void 0===d?void 0:d[e-a])===r[l]){if(c.dtop++,c.dtop>=3)return!0;c.dtop>v.dtop&&v.dtop++}else c.dtop=0;if((null===(u=null==n?void 0:n[t-a])||void 0===u?void 0:u[e- -1*a])===r[l]){if(c.dbot++,c.dbot>=3)return!0;c.dbot>v.dbot&&v.dbot++}else c.dbot=0;if(3===Math.max(...Object.values(v)))return!0}return!1})(e,v,o)?(n=!0,c.innerHTML=l+" win!"):(e=>{for(let r=0;r<5;r++)for(let t=0;t<5;t++)if(!e[r][t])return!1;return!0})(o)&&(c.innerHTML="Ничья"),l=l===Object.keys(r)[0]?Object.keys(r)[1]:Object.keys(r)[0],d.innerHTML=l+"'s move"}var i,u})),(0,e.render)(i,5,o),u.onclick=()=>{Array.from(i.children).map((e=>e.innerHTML="")),o=new Array(5).fill(null).map((e=>new Array(5).fill(null))),n=!1,l=Object.keys(r)[0],d.innerHTML="",c.innerHTML="",(0,e.render)(i,5,o)}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0IwQixFQURBQSxJQUFlQyxPQUFPQyxLQUFLSCxHQUFTLEdBQ3ZCRSxPQUFPQyxLQUFLSCxHQUFTLEdBQ3BCRSxPQUFPQyxLQUFLSCxHQUFTLEdBRXZDUSxFQUFlakMsVUFBWTBCLEVBQWEsUyxDQUV0QixJQUNsQnFCLEVBRUFDLEMsS0ErRUosSUFBQXBELFFBQU9DLEVBbkhpQixFQW1IQ0UsR0FHekJtQyxFQUFXMkIsUUFBVSxLQUVqQnBELE1BQU1DLEtBQUtiLEVBQU1jLFVBQVVvQixLQUFLbEIsR0FBUUEsRUFBR2IsVUFBWSxLQUN2REQsRUFBYSxJQUFJVSxNQXpIRyxHQTBIZnFCLEtBQUssTUFDTEMsS0FBS2xCLEdBQU8sSUFBSUosTUEzSEQsR0EySGtCcUIsS0FBSyxRQUMzQ0QsR0FBTSxFQUNOSCxFQUFhQyxPQUFPQyxLQUFLSCxHQUFTLEdBRWxDUSxFQUFlakMsVUFBWSxHQUUzQm1DLEVBQVduQyxVQUFZLElBQ3ZCLElBQUFKLFFBQU9DLEVBbElhLEVBa0lLRSxFQUFXLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aWMtdGFjLXRvZS10eXBlc2NyaXB0Ly4vc3JjL3R5cGVzY3JpcHQvcmVuZGVyLnRzIiwid2VicGFjazovL3RpYy10YWMtdG9lLXR5cGVzY3JpcHQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtdHlwZXNjcmlwdC8uL3NyYy90eXBlc2NyaXB0L2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCByZW5kZXIgPSAoZmllbGQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgZmllbGRTaXplOiBudW1iZXIsIGNlbGxzQXJyYXk6IHN0cmluZ1tdW10pID0+IHtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGZpZWxkLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgIGBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgke2ZpZWxkU2l6ZX0sIDUwcHgpYFxyXG4gICAgKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRTaXplICogZmllbGRTaXplOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJjZWxsXCIpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBmaWVsZC5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgIH1cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIEFycmF5LmZyb20oZmllbGQuY2hpbGRyZW4pLmZvckVhY2goKGVsOkhUTUxFbGVtZW50LCBpKSA9PiB7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiY2VsbFhcIiwgU3RyaW5nKGkgJSAoZmllbGRTaXplKSkpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImNlbGxZXCIsIFN0cmluZyhNYXRoLmZsb29yKGkgLyAoZmllbGRTaXplKSkpKTtcclxuICAgICAgICBlbC5pbm5lckhUTUwgPSBjZWxsc0FycmF5Py5bTWF0aC5mbG9vcihpIC8gZmllbGRTaXplKV0/LltpICUgZmllbGRTaXplXSA/PyBudWxsO1xyXG4gICAgfSk7XHJcblxyXG59OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgSVBsYXllcnMgZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xyXG5pbXBvcnQge3JlbmRlcn0gZnJvbSBcIi4vcmVuZGVyXCI7XHJcblxyXG5jb25zdCBwbGF5ZXJzOiBJUGxheWVycyA9IHtcclxuICAgIFwieCBwbGF5ZXJcIjogXCJ4XCIsXHJcbiAgICBcIm8gcGxheWVyXCI6IFwib1wiXHJcbn07XHJcblxyXG5sZXQgY3VyclBsYXllcjogc3RyaW5nID0gT2JqZWN0LmtleXMocGxheWVycylbMF07XHJcblxyXG5sZXQgd2luOiBib29sZWFuID0gZmFsc2U7XHJcbmxldCBmaWVsZFNpemU6IG51bWJlciA9IDU7XHJcbmNvbnN0IGNvbmRXaW46IG51bWJlciA9IDM7XHJcbmxldCBjZWxsc0FycmF5OiBzdHJpbmdbXVtdID0gbmV3IEFycmF5KGZpZWxkU2l6ZSlcclxuICAgIC5maWxsKG51bGwpXHJcbiAgICAubWFwKChlbCkgPT4gbmV3IEFycmF5KGZpZWxkU2l6ZSkuZmlsbChudWxsKSk7XHJcblxyXG5jb25zdCBmaWVsZDogSFRNTEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5maWVsZFwiKTtcclxuY29uc3QgY3VyclBsYXllclRleHQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VyclBsYXllclwiKTtcclxuY29uc3QgcmVsb2FkR2FtZTogSFRNTEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZWxvYWRcIik7XHJcbmNvbnN0IHdpbm5lclRleHQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2lubmVyXCIpO1xyXG5cclxuY29uc3QgY2hlY2tEcmF3ID0gKGZpZWxkOiBzdHJpbmdbXVtdKTogYm9vbGVhbiA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaWVsZFNpemU7IGorKykge1xyXG4gICAgICAgICAgICBpZiAoIWZpZWxkW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmNvbnN0IGdldEZpZWxkQ2VsbCA9ICh4Om51bWJlciwgeTpudW1iZXIsIGZpZWxkOiBzdHJpbmdbXVtdKSA9PiB7XHJcbiAgICByZXR1cm4gZmllbGQ/Llt4XT8uW3ldID8/IG51bGxcclxufVxyXG5cclxuY29uc3QgY2hhbmdlQ3VyclBMYXllciA9ICgpOiB2b2lkID0+IHtcclxuICAgIGlmIChjdXJyUGxheWVyID09PSBPYmplY3Qua2V5cyhwbGF5ZXJzKVswXSlcclxuICAgICAgICBjdXJyUGxheWVyID0gT2JqZWN0LmtleXMocGxheWVycylbMV07XHJcbiAgICBlbHNlIGN1cnJQbGF5ZXIgPSBPYmplY3Qua2V5cyhwbGF5ZXJzKVswXTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGN1cnJQbGF5ZXJUZXh0LmlubmVySFRNTCA9IGN1cnJQbGF5ZXIgKyBgJ3MgbW92ZWA7XHJcbn07XHJcbmNvbnN0IHNldE1vdmVPbkNlbGwgPSAoXHJcbiAgICBjZWxsWDogbnVtYmVyLFxyXG4gICAgY2VsbFk6IG51bWJlcixcclxuICAgIGZpZWxkQ2VsbHM6IHN0cmluZ1tdW11cclxuKSA9PiB7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBmaWVsZENlbGxzW2NlbGxZXVtjZWxsWF0gPSBwbGF5ZXJzW2N1cnJQbGF5ZXJdO1xyXG4gICAgcmV0dXJuIGZpZWxkQ2VsbHM7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0NvbmRpdGlvbiA9IChjZWxsWDogbnVtYmVyLCBjZWxsWTogbnVtYmVyLCBmaWVsZDogc3RyaW5nW11bXSkgPT4ge1xyXG4gICAgY29uc3QgY29uZENoZWNrID0geyBoOiAwLCB2OiAwLCBkdG9wOiAwLCBkYm90OiAwIH07XHJcbiAgICBjb25zdCBjb25kQ2hlY2tNYXggPSB7IGg6IDAsIHY6IDAsIGR0b3A6IDAsIGRib3Q6IDAgfTtcclxuICAgIGZvciAobGV0IGkgPSAtY29uZFdpbiArIDE7IGkgPCBjb25kV2luOyBpKyspIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKGZpZWxkPy5bY2VsbFldPy5bY2VsbFggLSBpXSA9PT0gcGxheWVyc1tjdXJyUGxheWVyXSkge1xyXG4gICAgICAgICAgICBjb25kQ2hlY2suaCsrO1xyXG4gICAgICAgICAgICBpZihjb25kQ2hlY2suaCA+PSBjb25kV2luKSByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICBpZiAoY29uZENoZWNrLmggPiBjb25kQ2hlY2tNYXguaCkgY29uZENoZWNrTWF4LmgrKztcclxuICAgICAgICB9IGVsc2UgY29uZENoZWNrLmggPSAwO1xyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKGZpZWxkPy5bY2VsbFkgLSBpXT8uW2NlbGxYXSA9PT0gcGxheWVyc1tjdXJyUGxheWVyXSkge1xyXG4gICAgICAgICAgICBjb25kQ2hlY2sudisrO1xyXG4gICAgICAgICAgICBpZihjb25kQ2hlY2sudiA+PSBjb25kV2luKSByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICBpZiAoY29uZENoZWNrLnYgPiBjb25kQ2hlY2tNYXgudikgY29uZENoZWNrTWF4LnYrKztcclxuICAgICAgICB9IGVsc2UgY29uZENoZWNrLnYgPSAwO1xyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKGZpZWxkPy5bY2VsbFkgLSBpXT8uW2NlbGxYIC0gaV0gPT09IHBsYXllcnNbY3VyclBsYXllcl0pIHtcclxuICAgICAgICAgICAgY29uZENoZWNrLmR0b3ArKztcclxuICAgICAgICAgICAgaWYoY29uZENoZWNrLmR0b3AgPj0gY29uZFdpbikgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgaWYgKGNvbmRDaGVjay5kdG9wID4gY29uZENoZWNrTWF4LmR0b3ApIGNvbmRDaGVja01heC5kdG9wKys7XHJcbiAgICAgICAgfSBlbHNlIGNvbmRDaGVjay5kdG9wID0gMDtcclxuXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmIChmaWVsZD8uW2NlbGxZIC0gaV0/LltjZWxsWCAtIGkgKiAtMV0gPT09IHBsYXllcnNbY3VyclBsYXllcl0pIHtcclxuICAgICAgICAgICAgY29uZENoZWNrLmRib3QrKztcclxuICAgICAgICAgICAgaWYoY29uZENoZWNrLmRib3QgPj0gY29uZFdpbikgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgaWYgKGNvbmRDaGVjay5kYm90ID4gY29uZENoZWNrTWF4LmRib3QpIGNvbmRDaGVja01heC5kYm90Kys7XHJcbiAgICAgICAgfSBlbHNlIGNvbmRDaGVjay5kYm90ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXMoY29uZENoZWNrTWF4KSkgPT09IGNvbmRXaW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcblxyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5maWVsZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmICh3aW4pIHJldHVybjtcclxuICAgIGNvbnN0IGNlbGwgPSBlLnRhcmdldCBhcyBFbGVtZW50O1xyXG5cclxuICAgIGlmIChjZWxsLmNsYXNzTGlzdC5jb250YWlucyhcImNlbGxcIikpIHtcclxuICAgICAgICBjb25zdCBbeENvb3JkLCB5Q29vcmRdID0gW1xyXG4gICAgICAgICAgICBOdW1iZXIoY2VsbC5nZXRBdHRyaWJ1dGUoXCJjZWxsWFwiKSksXHJcbiAgICAgICAgICAgIE51bWJlcihjZWxsLmdldEF0dHJpYnV0ZShcImNlbGxZXCIpKVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGlmKGdldEZpZWxkQ2VsbCh5Q29vcmQsIHhDb29yZCwgY2VsbHNBcnJheSkpIHJldHVyblxyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBwbGF5ZXJzW2N1cnJQbGF5ZXJdO1xyXG4gICAgICAgIGNlbGxzQXJyYXkgPSBzZXRNb3ZlT25DZWxsKHhDb29yZCwgeUNvb3JkLCBjZWxsc0FycmF5KTtcclxuICAgICAgICBpZiAoY2hlY2tDb25kaXRpb24oeENvb3JkLCB5Q29vcmQsIGNlbGxzQXJyYXkpKSB7XHJcbiAgICAgICAgICAgIHdpbiA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgd2lubmVyVGV4dC5pbm5lckhUTUwgPSBjdXJyUGxheWVyICsgXCIgd2luIVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2hlY2tEcmF3KGNlbGxzQXJyYXkpKSB7IC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgd2lubmVyVGV4dC5pbm5lckhUTUwgPSBcItCd0LjRh9GM0Y9cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNoYW5nZUN1cnJQTGF5ZXIoKTtcclxuXHJcbiAgICB9XHJcblxyXG59KTtcclxuXHJcbnJlbmRlcihmaWVsZCwgZmllbGRTaXplLCBjZWxsc0FycmF5KTtcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxucmVsb2FkR2FtZS5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgQXJyYXkuZnJvbShmaWVsZC5jaGlsZHJlbikubWFwKChlbCkgPT4gKGVsLmlubmVySFRNTCA9IFwiXCIpKTtcclxuICAgIGNlbGxzQXJyYXkgPSBuZXcgQXJyYXkoZmllbGRTaXplKVxyXG4gICAgICAgIC5maWxsKG51bGwpXHJcbiAgICAgICAgLm1hcCgoZWwpID0+IG5ldyBBcnJheShmaWVsZFNpemUpLmZpbGwobnVsbCkpO1xyXG4gICAgd2luID0gZmFsc2U7XHJcbiAgICBjdXJyUGxheWVyID0gT2JqZWN0LmtleXMocGxheWVycylbMF07XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjdXJyUGxheWVyVGV4dC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgd2lubmVyVGV4dC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgcmVuZGVyKGZpZWxkLCBmaWVsZFNpemUsIGNlbGxzQXJyYXkpO1xyXG59O1xyXG5cclxuIl0sIm5hbWVzIjpbInJlbmRlciIsImZpZWxkIiwiZmllbGRTaXplIiwiY2VsbHNBcnJheSIsImlubmVySFRNTCIsInNldEF0dHJpYnV0ZSIsImkiLCJjZWxsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImZvckVhY2giLCJlbCIsIlN0cmluZyIsIk1hdGgiLCJmbG9vciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicGxheWVycyIsImN1cnJQbGF5ZXIiLCJPYmplY3QiLCJrZXlzIiwid2luIiwiZmlsbCIsIm1hcCIsInF1ZXJ5U2VsZWN0b3IiLCJjdXJyUGxheWVyVGV4dCIsInJlbG9hZEdhbWUiLCJ3aW5uZXJUZXh0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJjb250YWlucyIsInhDb29yZCIsInlDb29yZCIsIk51bWJlciIsImdldEF0dHJpYnV0ZSIsIngiLCJ5IiwiZ2V0RmllbGRDZWxsIiwiY2VsbFgiLCJmaWVsZENlbGxzIiwiY2VsbFkiLCJjb25kQ2hlY2siLCJoIiwidiIsImR0b3AiLCJkYm90IiwiY29uZENoZWNrTWF4IiwibWF4IiwidmFsdWVzIiwiY2hlY2tDb25kaXRpb24iLCJqIiwiY2hlY2tEcmF3Iiwib25jbGljayJdLCJzb3VyY2VSb290IjoiIn0=